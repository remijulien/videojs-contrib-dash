/*! videojs-contrib-dash - v2.1.0 - 2016-04-12
 * Copyright (c) 2016 Brightcove  */
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){(function(a){"undefined"!=typeof window?b.exports=window:"undefined"!=typeof a?b.exports=a:"undefined"!=typeof self?b.exports=self:b.exports={}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./ManifestHelper"),h=d(g),i=a("./MediaMap"),j=d(i),k=a("./SegmentView"),l=d(k),m=a("./SRFragmentLoader"),n=d(m),o=a("./PlayerInterface"),p=d(o),q=function(){function a(b,c,d,f){e(this,a),this._player=b,this._videoElement=c,this._p2pConfig=d,this._liveDelay=f,this._player.setLiveDelay(f),this._player.on(dashjs.MediaPlayer.events.MANIFEST_LOADED,this._onManifestLoaded,this)}return f(a,[{key:"_onManifestLoaded",value:function(a){var b=a.data;if(b&&(!this._manifest||b.url!==this._manifest.url)){this._manifest=b,window.streamrootDownloader&&window.streamrootDownloader.dispose();var c=new h["default"](this._player,this._manifest),d=new p["default"](this._player,c,this._liveDelay),e=new j["default"](c);window.streamrootDownloader=new window.Streamroot.Downloader(d,this._manifest.url,e,this._p2pConfig,l["default"],this._videoElement),this._player.extend("FragmentLoader",n["default"],!0)}}}]),a}();c["default"]=q,b.exports=c["default"]},{"./ManifestHelper":3,"./MediaMap":4,"./PlayerInterface":5,"./SRFragmentLoader":6,"./SegmentView":7}],3:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./TrackView"),h=d(g),i=a("../node_modules/dashjs/src/dash/utils/SegmentsGetter"),j=d(i),k=a("./SegmentsCache"),l=d(k),m=function(){function a(b,c){function d(a){var b=this.factory,c=this.context;f=function(){return a},g=function(){return c},h=function(){return b.getSingletonInstance(c,"DashManifestModel")},i=function(){return a.timelineConverter}}e(this,a),this._player=b,this._manifest=c,this._segmentsCache=new l["default"](b);var f=void 0,g=void 0,h=void 0,i=void 0;b.extend("Stream",d,!0),this._getDashManifestModel=function(){return h?h():void 0},this._getTimelineConverter=function(){return i?i():void 0},this._getConfig=function(){return f()},this._getContext=function(){return g()},this._getSegmentsGetter=function(){if(!this._segmentsGetter){var a=this._getContext(),b=this._getConfig();this._segmentsGetter=j["default"](a).create(b,this.isLive())}return this._segmentsGetter}}return f(a,[{key:"getSegmentList",value:function(a){if(this._segmentsCache.hasSegments(a))return this._segmentsCache.getSegments(a);var b=this._getDashManifestModel(),c=this._getTimelineConverter();if(!b||!c)throw new Error("Tried to get representation before we could have access to dash.js manifest internals");var d=b.getMpd(this._manifest),e=b.getRegularPeriods(this._manifest,d)[a.periodId],f=b.getAdaptationsForPeriod(this._manifest,e)[a.adaptationSetId],g=b.getRepresentationsForAdaptation(this._manifest,f)[a.representationId],h=this.isLive();g.segmentAvailabilityRange=c.calcSegmentAvailabilityRange(g,h);var i=this._getSegmentsGetter().getSegments(g,0,0,void 0,1e6);return i}},{key:"isLive",value:function(){var a=this._getDashManifestModel();if(!a)throw new Error("Tried to get representation before we could have access to dash.js manifest internals");return a.getIsDynamic(this._manifest)}},{key:"getCurrentTracks",value:function(){for(var a={},b=["audio","video"],c=0;c<b.length;c++){var d=b[c],e=this._player.getTracksFor(d);if(e&&e.length>0){var f=this._player.getCurrentTrackFor(d),g=this._player.getQualityFor(d);a[d]=new h["default"]({periodId:f.streamInfo.index,adaptationSetId:f.index,representationId:g})}}return a}},{key:"getAllTracks",value:function(){var a={},b=this._player.getStreamsFromManifest(this._manifest),c=!0,d=!1,e=void 0;try{for(var f,g=b[Symbol.iterator]();!(c=(f=g.next()).done);c=!0)for(var i=f.value,j=["audio","video"],k=0;k<j.length;k++){var l=j[k];a[l]=[];var m=this._player.getTracksForTypeFromManifest(l,this._manifest,i);if(m){var n=!0,o=!1,p=void 0;try{for(var q,r=m[Symbol.iterator]();!(n=(q=r.next()).done);n=!0)for(var s=q.value,t=0;t<s.representationCount;t++)a[l].push(new h["default"]({periodId:i.index,adaptationSetId:s.index,representationId:t}))}catch(u){o=!0,p=u}finally{try{!n&&r["return"]&&r["return"]()}finally{if(o)throw p}}}}}catch(u){d=!0,e=u}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}return a}}]),a}();c["default"]=m,b.exports=c["default"]},{"../node_modules/dashjs/src/dash/utils/SegmentsGetter":16,"./SegmentsCache":8,"./TrackView":9}],4:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("./SegmentView"),i=d(h),j=a("./TrackView"),k=(d(j),function(){function a(b){f(this,a),this._manifestHelper=b}return g(a,[{key:"isLive",value:function(){return this._manifestHelper.isLive()}},{key:"getSegmentTime",value:function(a){return a.segmentId/10}},{key:"getSegmentList",value:function(a,b,c){var d=this._manifestHelper.getSegmentList(a),e=[],f=void 0;if(void 0===d)return e;var g=!0,h=!1,j=void 0;try{for(var k,l=d[Symbol.iterator]();!(g=(k=l.next()).done);g=!0){var m=k.value,n=m.mediaStartTime||m.startTime;m.timescale&&(n/=m.timescale),n>=b&&b+c>=n&&(f=new i["default"]({trackView:a,segmentId:Math.round(10*n)}),e.push(f))}}catch(o){h=!0,j=o}finally{try{!g&&l["return"]&&l["return"]()}finally{if(h)throw j}}return e}},{key:"getNextSegmentView",value:function(a){var b=this.getSegmentTime(a)+.2,c=this.getSegmentList(a.trackView,b,30);return c.length?c[0]:null}},{key:"getTracksList",value:function(){for(var a=this._manifestHelper.getAllTracks(),b=[],c=["audio","video"],d=0;d<c.length;d++){var f=c[d];a[f]&&b.push.apply(b,e(a[f]))}return b}}]),a}());c["default"]=k,b.exports=c["default"]},{"./SegmentView":7,"./TrackView":9}],5:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){return Array.isArray(a)?a:Array.from(a)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("./TrackView"),i=d(h),j=function(){function a(b,c,d){f(this,a),this._player=b,this._manifestHelper=c,this._liveDelay=d,this.MIN_BUFFER_LEVEL=10,this._listeners=new Map,this._onStreamInitialized=this._dispatchInitialOnTrackChange.bind(this),this._player.on(dashjs.MediaPlayer.events.STREAM_INITIALIZED,this._onStreamInitialized)}return g(a,[{key:"isLive",value:function(){return this._manifestHelper.isLive()}},{key:"getBufferLevelMax",value:function(){return Math.max(0,this._liveDelay-this.MIN_BUFFER_LEVEL)}},{key:"setBufferMarginLive",value:function(a){this._player.setStableBufferTime(this.MIN_BUFFER_LEVEL+a),this._player.setBufferTimeAtTopQuality(this.MIN_BUFFER_LEVEL+a),this._player.setBufferTimeAtTopQualityLongForm(this.MIN_BUFFER_LEVEL+a)}},{key:"addEventListener",value:function(a,b){if("onTrackChange"!==a)return void console.error("Tried to listen to an event that wasn't onTrackChange");var c=this._createOnTrackChangeListener(b);this._listeners.set(b,c),this._player.on("qualityChanged",c)}},{key:"removeEventListener",value:function(a,b){if("onTrackChange"!==a)return void console.error("Tried to remove listener for an event that wasn't onTrackChange");var c=this._listeners.get(b);this._player.off("qualityChanged",c),this._listeners["delete"](b)}},{key:"_createOnTrackChangeListener",value:function(a){var b=this._player;return function(c){var d=c.mediaType,e=c.streamInfo,f=(c.oldQuality,c.newQuality),g={};g[d]=new i["default"]({periodId:e.index,adaptationSetId:b.getCurrentTrackFor(d).index,representationId:Number(f)}),a(g)}}},{key:"_dispatchInitialOnTrackChange",value:function(){var a=this._manifestHelper.getCurrentTracks(),b=!0,c=!1,d=void 0;try{for(var f,g=this._listeners[Symbol.iterator]();!(b=(f=g.next()).done);b=!0){var h=e(f.value),i=h[0];h.slice(1);i(a)}}catch(j){c=!0,d=j}finally{try{!b&&g["return"]&&g["return"]()}finally{if(c)throw d}}}}]),a}();c["default"]=j,b.exports=c["default"]},{"./TrackView":9}],6:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(){if(!window.streamrootDownloader)throw new Error("streamrootDownloader is not defined");v=window.streamrootDownloader}function c(a){if("InitializationSegment"!==a.type){var b=new l["default"]({periodId:a.mediaInfo.streamInfo.index,adaptationSetId:a.mediaInfo.index,representationId:a.quality});return new j["default"]({trackView:b,segmentId:Math.round(10*a.startTime)})}return null}function d(a){var b=[];return a.range&&b.push(["Range","bytes="+a.range]),b}function e(a,b){return{url:s.modifyRequestURL(a.url),headers:b}}function f(a){if(!a)return void r.trigger(h["default"].LOADING_COMPLETED,{request:void 0,error:new Error(n,o)});var b=d(a),f=c(a),g=e(a,b),i=new Date,j=i,k=!0,l=[],p=0,s=function(b,c){a.requestStartDate=i,a.firstByteDate=a.firstByteDate||i,a.requestEndDate=new Date,t.addHttpRequest(a.mediaType,null,a.type,a.url,null,a.serviceLocation||null,a.range||null,a.requestStartDate,a.firstByteDate,a.requestEndDate,c,a.duration,null,b?l:null)},u=function(b,c){s(!0,200),r.trigger(h["default"].LOADING_COMPLETED,{request:a,response:b,sender:q})},x=function(b){var c=new Date;k&&(k=!1,a.firstByteDate=c);var d=0;b.cdnDownloaded&&(d+=b.cdnDownloaded),b.p2pDownloaded&&(d+=b.p2pDownloaded),l.push({s:j,d:c.getTime()-j.getTime(),b:[d?d-p:0]}),j=c,p=d,r.trigger(h["default"].LOADING_PROGRESS,{request:a})},y=function(a){s(!1,a.target.status),r.trigger(h["default"].LOADING_COMPLETED,{request:void 0,error:new Error(m,"failed loading fragment")})};w=v.getSegment(g,{onSuccess:u,onProgress:x,onError:y},f)}function g(){w&&w()}function i(){g()}var k=this.context,p=this.factory,q=this.parent,r=p.getSingletonInstance(k,"EventBus"),s=a.requestModifier,t=a.metricsModel,u=void 0,v=void 0,w=void 0;return u={load:f,abort:g,reset:i},b(),u}Object.defineProperty(c,"__esModule",{value:!0});var f=a("../node_modules/dashjs/src/core/EventBus.js"),g=(d(f),a("../node_modules/dashjs/src/core/events/Events.js")),h=d(g),i=a("./SegmentView"),j=d(i),k=a("./TrackView"),l=d(k),m=1,n=2,o="request is null";c["default"]=e,b.exports=c["default"]},{"../node_modules/dashjs/src/core/EventBus.js":10,"../node_modules/dashjs/src/core/events/Events.js":13,"./SegmentView":7,"./TrackView":9}],7:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("./TrackView"),i=d(h),j=function(){function a(b){e(this,a),this.segmentId=b.segmentId,this.trackView=new i["default"](b.trackView)}return g(a,null,[{key:"fromArrayBuffer",value:function(b){var c=new Uint32Array(b),d=f(c,4),e=d[0],g=d[1],h=d[2],j=d[3];return new a({trackView:new i["default"]({periodId:e,adaptationSetId:g,representationId:h}),segmentId:j})}}]),g(a,[{key:"isEqual",value:function(a){if(!a)return!1;var b=a.segmentId,c=a.trackView;return this.segmentId===b&&this.trackView.isEqual(c)}},{key:"isInTrack",value:function(a){return this.trackView.isEqual(a)}},{key:"viewToString",value:function(){return this.trackView.viewToString()+"S"+this.segmentId}},{key:"toArrayBuffer",value:function(){return new Uint32Array([this.trackView.periodId,this.trackView.adaptationSetId,this.trackView.representationId,this.segmentId]).buffer}}]),a}();c["default"]=j,b.exports=c["default"]},{"./TrackView":9}],8:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./TrackView"),h=d(g),i=function(){function a(b){e(this,a),this._player=b,this._player.on("segmentsLoaded",this._onSegmentsLoaded,this),this._cache={}}return f(a,[{key:"_onSegmentsLoaded",value:function(a){var b=a.segments,c=h["default"].makeIDString(a.representation.adaptation.period.index,a.representation.adaptation.index,a.representation.index);this._cache[c]=b}},{key:"hasSegments",value:function(a){return void 0!==this._cache[a.viewToString()]}},{key:"getSegments",value:function(a){return this._cache[a.viewToString()]}}]),a}();c["default"]=i,b.exports=c["default"]},{"./TrackView":9}],9:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b){d(this,a),this.periodId=b.periodId,this.adaptationSetId=b.adaptationSetId,this.representationId=b.representationId}return e(a,[{key:"viewToString",value:function(){return a.makeIDString(this.periodId,this.adaptationSetId,this.representationId)}},{key:"isEqual",value:function(a){return!!a&&this.periodId===a.periodId&&this.adaptationSetId===a.adaptationSetId&&this.representationId===a.representationId}}],[{key:"makeIDString",value:function(a,b,c){return"P"+a+"A"+b+"R"+c}}]),a}();c["default"]=f,b.exports=c["default"]},{}],10:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a,b,c){if(!a)throw new Error("event type cannot be null or undefined");if(!b||"function"!=typeof b)throw new Error("listener must be a function: "+b);if(!(e(a,b,c)>=0)){var d={callback:b,scope:c};g[a]=g[a]||[],g[a].push(d)}}function b(a,b,c){if(a&&b&&g[a]){var d=e(a,b,c);0>d||g[a].splice(d,1)}}function c(a,b){if(a&&g[a]){if(b=b||{},b.hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");b.type=a,g[a].forEach(function(a){a.callback.call(a.scope,b)})}}function d(){g={}}function e(a,b,c){var d=g[a],e=-1;if(!d||0===d.length)return e;for(var f=0;f<d.length;f++)if(d[f].callback===b&&(!c||c===d[f].scope))return f;return e}var f=void 0,g={};return f={on:a,off:b,trigger:c,reset:d}}Object.defineProperty(c,"__esModule",{value:!0});var f=a("./FactoryMaker.js"),g=d(f);e.__dashjs_factory_name="EventBus",c["default"]=g["default"].getSingletonFactory(e),b.exports=c["default"]},{"./FactoryMaker.js":11}],11:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=function(){function a(a,b,c,d){var e=g(d);!e[a]&&b&&(e[a]={instance:b,override:c})}function b(a,b){for(var c in j){var d=j[c];if(d.context===a&&d.name===b)return d.instance}return null}function c(a,b,c){for(var d in j){var e=j[d];if(e.context===a&&e.name===b)return void(j[d].instance=c)}j.push({name:b,context:a,instance:c})}function d(a){return function(b){return void 0===b&&(b={}),{create:function(){return f(a.__dashjs_factory_name,a.apply({context:b},arguments),b,arguments)}}}}function e(a){return function(c){var d=void 0;return void 0===c&&(c={}),{getInstance:function(){return d||(d=b(c,a.__dashjs_factory_name)),d||(d=f(a.__dashjs_factory_name,a.apply({context:c},arguments),c,arguments),j.push({name:a.__dashjs_factory_name,context:c,instance:d})),d}}}}function f(a,b,c,d){var e=g(c),f=e[a];if(f){var i=f.instance;if(!f.override)return i.apply({context:c,factory:h},d);i=i.apply({context:c,factory:h,parent:b},d);for(var j in i)b.hasOwnProperty(j)&&(b[j]=i[j])}return b}function g(a){var b=void 0;return i.forEach(function(c){c===a&&(b=c)}),b||(b=i.push(a)),b}var h=void 0,i=[],j=[];return h={extend:a,getSingletonInstance:b,setSingletonInstance:c,getSingletonFactory:e,getClassFactory:d}}();c["default"]=d,b.exports=c["default"]},{}],12:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0,h=j=void 0}},h=a("./EventsBase.js"),i=d(h),j=function(a){function b(){e(this,b),g(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.AST_IN_FUTURE="astinfuture",this.BUFFERING_COMPLETED="bufferingCompleted",this.BUFFER_CLEARED="bufferCleared",this.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",this.BYTES_APPENDED="bytesAppended",this.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",this.CHUNK_APPENDED="chunkAppended",this.CURRENT_TRACK_CHANGED="currenttrackchanged",this.DATA_UPDATE_COMPLETED="dataUpdateCompleted",this.DATA_UPDATE_STARTED="dataUpdateStarted",this.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",this.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",this.INITIALIZATION_LOADED="initializationLoaded",this.INIT_FRAGMENT_LOADED="initFragmentLoaded",this.INIT_REQUESTED="initRequested",this.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",this.LIVE_EDGE_SEARCH_COMPLETED="liveEdgeSearchCompleted",this.LOADING_COMPLETED="loadingCompleted",this.LOADING_PROGRESS="loadingProgress",this.MANIFEST_UPDATED="manifestUpdated",this.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",this.QUALITY_CHANGED="qualityChanged",this.QUOTA_EXCEEDED="quotaExceeded",this.REPRESENTATION_UPDATED="representationUpdated",this.SEGMENTS_LOADED="segmentsLoaded",this.SERVICE_LOCATION_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",this.SOURCEBUFFER_APPEND_COMPLETED="sourceBufferAppendCompleted",this.SOURCEBUFFER_REMOVE_COMPLETED="sourceBufferRemoveCompleted",this.STREAMS_COMPOSED="streamsComposed",this.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",this.STREAM_COMPLETED="streamCompleted",this.STREAM_INITIALIZED="streaminitialized",this.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",this.TIMED_TEXT_REQUESTED="timedTextRequested",this.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",this.URL_RESOLUTION_FAILED="urlResolutionFailed",this.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",this.XLINK_ALL_ELEMENTS_LOADED="xlinkAllElementsLoaded",this.XLINK_ELEMENT_LOADED="xlinkElementLoaded",this.XLINK_READY="xlinkReady"}return f(b,a),b}(i["default"]);c["default"]=j,b.exports=c["default"]},{"./EventsBase.js":14}],13:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0,h=j=void 0}},h=a("./CoreEvents.js"),i=d(h),j=function(a){function b(){e(this,b),g(Object.getPrototypeOf(b.prototype),"constructor",this).apply(this,arguments)}return f(b,a),b}(i["default"]),k=new j;c["default"]=k,b.exports=c["default"]},{"./CoreEvents.js":12}],14:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a)}return e(a,[{key:"extend",value:function(a,b){if(a){var c=b?b.override:!1,d=b?b.publicOnly:!1;for(var e in a)!a.hasOwnProperty(e)||this[e]&&!c||d&&-1===a[e].indexOf("public_")||(this[e]=a[e])}}}]),a}();c["default"]=f,b.exports=c["default"]},{}],15:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){function c(a,c,e,f){var g,i,j,k,l,m,n,o=a.adaptation.period.mpd.manifest.Period_asArray[a.adaptation.period.index].AdaptationSet_asArray[a.adaptation.index].Representation_asArray[a.index].SegmentList,p=a.adaptation.period.mpd.manifest.Period_asArray[a.adaptation.period.index].AdaptationSet_asArray[a.adaptation.index].Representation_asArray[a.index].BaseURL,q=o.SegmentURL_asArray.length,r=[];for(n=a.startNumber,k=h.decideSegmentListRangeForTemplate(d,b,a,c,e,f),l=Math.max(k.start,0),m=Math.min(k.end,o.SegmentURL_asArray.length-1),g=l;m>=g;g++)j=o.SegmentURL_asArray[g],i=h.getIndexBasedSegment(d,b,a,g),i.replacementTime=(n+g-1)*a.segmentDuration,i.media=j.media?j.media:p,i.mediaRange=j.mediaRange,i.index=j.index,i.indexRange=j.indexRange,r.push(i),i=null;return a.availableSegmentsNumber=q,r}var d=a.timelineConverter,e=void 0;return e={getSegments:c}}Object.defineProperty(c,"__esModule",{value:!0});var f=a("../../core/FactoryMaker.js"),g=d(f),h=a("./SegmentsUtils.js");e.__dashjs_factory_name="ListSegmentsGetter";var i=g["default"].getClassFactory(e);c["default"]=i,b.exports=c["default"]},{"../../core/FactoryMaker.js":11,"./SegmentsUtils.js":17}],16:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){function c(){h=i["default"](f).create(a,b),j=k["default"](f).create(a,b),l=m["default"](f).create(a,b)}function d(a,b,c,d,f){var g,i=a.segmentInfoType;return"SegmentBase"!==i&&"BaseURL"!==i&&e(a,c)?("SegmentTimeline"===i?g=h.getSegments(a,b,c,f):"SegmentTemplate"===i?g=j.getSegments(a,b,c,f):"SegmentList"===i&&(g=l.getSegments(a,b,c,f)),d&&d(a,g)):g=a.segments,g}function e(a,b){var c,d,e=a.segments,f=!1;return e&&0!==e.length?(d=e[0].availabilityIdx,c=e[e.length-1].availabilityIdx,f=d>b||b>c):f=!0,f}var f=this.context,g=void 0,h=void 0,j=void 0,l=void 0;return g={getSegments:d},c(),g}Object.defineProperty(c,"__esModule",{value:!0});var f=a("../../core/FactoryMaker.js"),g=d(f),h=a("./TimelineSegmentsGetter.js"),i=d(h),j=a("./TemplateSegmentsGetter.js"),k=d(j),l=a("./ListSegmentsGetter.js"),m=d(l);e.__dashjs_factory_name="SegmentsGetter";var n=g["default"].getClassFactory(e);c["default"]=n,b.exports=c["default"]},{"../../core/FactoryMaker.js":11,"./ListSegmentsGetter.js":15,"./TemplateSegmentsGetter.js":18,"./TimelineSegmentsGetter.js":19}],17:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){for(;a.length<b;)a="0"+a;return a}function f(a,b){return a.representation.startNumber+b}function g(a,b,c){for(var d,f,g,h,i,j,k="%0",l=b.length,m=k.length;;){if(d=a.indexOf("$"+b),0>d)return a;if(f=a.indexOf("$",d+l),0>f)return a;if(g=a.indexOf(k,d+l),g>d&&f>g)switch(h=a.charAt(f-1),i=parseInt(a.substring(g+m,f-1),10),h){case"d":case"i":case"u":j=e(c.toString(),i);break;case"x":j=e(c.toString(16),i);break;case"X":j=e(c.toString(16),i).toUpperCase();break;case"o":j=e(c.toString(8),i);break;default:return a}else j=c;a=a.substring(0,d)+j+a.substring(f+1)}}function h(a,b,c,d){var e,g,h,i;return g=c.segmentDuration,isNaN(g)&&(g=c.adaptation.period.duration),h=c.adaptation.period.start+d*g,i=h+g,e=new n["default"],e.representation=c,e.duration=g,e.presentationStartTime=h,e.mediaStartTime=a.calcMediaTimeFromPresentationTime(e.presentationStartTime,c),e.availabilityStartTime=a.calcAvailabilityStartTimeFromPresentationTime(e.presentationStartTime,c.adaptation.period.mpd,b),e.availabilityEndTime=a.calcAvailabilityEndTimeFromPresentationTime(i,c.adaptation.period.mpd,b),e.wallStartTime=a.calcWallTimeForSegment(e,b),e.replacementNumber=f(e,d),e.availabilityIdx=d,e}function i(a,b,c,d,e,h,i,j,k){var l,m,o,p=d/h,q=Math.min(e/h,c.adaptation.period.mpd.maxSegmentDuration);return l=a.calcPresentationTimeFromMediaTime(p,c),m=l+q,o=new n["default"],o.representation=c,o.duration=q,o.mediaStartTime=p,o.presentationStartTime=l,o.availabilityStartTime=c.adaptation.period.mpd.manifest.loadedTime,o.availabilityEndTime=a.calcAvailabilityEndTimeFromPresentationTime(m,c.adaptation.period.mpd,b),o.wallStartTime=a.calcWallTimeForSegment(o,b),o.replacementTime=d,o.replacementNumber=f(o,k),i=g(i,"Number",o.replacementNumber),i=g(i,"Time",o.replacementTime),o.media=i,o.mediaRange=j,o.availabilityIdx=k,o}function j(a,b){if(!b||!b.segments)return null;var c,d,e=b.segments.length;if(e>a&&(c=b.segments[a],c&&c.availabilityIdx===a))return c;for(d=0;e>d;d++)if(c=b.segments[d],c&&c.availabilityIdx===a)return c;return null}function k(a,b,c,d,e){var f,g,h,i=2,j=e||10,k=0,l=Number.POSITIVE_INFINITY;return b&&!a.isTimeSyncCompleted()?h={start:k,end:l}:!b&&c||0>d?null:(f=Math.max(d-i,k),g=Math.min(d+j,l),h={start:f,end:g})}function l(a,b,c,d,e,f){var g,h,i,k=c.segmentDuration,l=c.adaptation.period.mpd.manifest.minBufferTime,m=c.segmentAvailabilityRange,n={start:a.calcPeriodRelativeTimeFromMpdRelativeTime(c,m.start),end:a.calcPeriodRelativeTimeFromMpdRelativeTime(c,m.end)},o=c.segments,p=2*k,q=f||Math.max(2*l,10*k),r=NaN,s=null;return n.start=Math.max(n.start,0),b&&!a.isTimeSyncCompleted()?(g=Math.floor(n.start/k),h=Math.floor(n.end/k),i={start:g,end:h}):(o&&o.length>0?(s=j(e,c),r=s?a.calcPeriodRelativeTimeFromMpdRelativeTime(c,s.presentationStartTime):e>0?e*k:a.calcPeriodRelativeTimeFromMpdRelativeTime(c,d)):r=e>0?e*k:b?n.end:n.start,g=Math.floor(Math.max(r-p,n.start)/k),h=Math.floor(Math.min(g+q/k,n.end/k)),i={start:g,end:h})}Object.defineProperty(c,"__esModule",{value:!0}),c.replaceTokenForTemplate=g,c.getIndexBasedSegment=h,c.getTimeBasedSegment=i,c.getSegmentByIndex=j,c.decideSegmentListRangeForTimeline=k,c.decideSegmentListRangeForTemplate=l;var m=a("./../vo/Segment.js"),n=d(m)},{"./../vo/Segment.js":20}],18:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){function c(a,c,e,f){var g,i,j,k,l,m=a.adaptation.period.mpd.manifest.Period_asArray[a.adaptation.period.index].AdaptationSet_asArray[a.adaptation.index].Representation_asArray[a.index].SegmentTemplate,n=a.segmentDuration,o=a.segmentAvailabilityRange,p=[],q=null,r=null;for(l=a.startNumber,g=isNaN(n)&&!b?{start:l,end:l}:h.decideSegmentListRangeForTemplate(d,b,a,c,e,f),j=g.start,k=g.end,i=j;k>=i;i++)r=h.getIndexBasedSegment(d,b,a,i),r.replacementTime=(l+i-1)*a.segmentDuration,q=m.media,q=h.replaceTokenForTemplate(q,"Number",r.replacementNumber),q=h.replaceTokenForTemplate(q,"Time",r.replacementTime),r.media=q,p.push(r),r=null;return isNaN(n)?a.availableSegmentsNumber=1:a.availableSegmentsNumber=Math.ceil((o.end-o.start)/n),p}var d=a.timelineConverter,e=void 0;return e={getSegments:c}}Object.defineProperty(c,"__esModule",{value:!0});var f=a("../../core/FactoryMaker.js"),g=d(f),h=a("./SegmentsUtils.js");e.__dashjs_factory_name="TemplateSegmentsGetter";var i=g["default"].getClassFactory(e);c["default"]=i,b.exports=c["default"]},{"../../core/FactoryMaker.js":11,"./SegmentsUtils.js":17}],19:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){function c(a,c,e,f){var g,i,j,k,l,m,n,o,p,q,r,s,t,u,v=a.adaptation.period.mpd.manifest.Period_asArray[a.adaptation.period.index].AdaptationSet_asArray[a.adaptation.index].Representation_asArray[a.index].SegmentTemplate,w=v.SegmentTimeline,x=a.availableSegmentsNumber>0,y=10,z=0,A=0,B=-1,C=[],D=!1,E=function(c){return h.getTimeBasedSegment(d,b,a,z,c.d,u,v.media,c.mediaRange,B)};for(u=a.timescale,g=w.S_asArray,p=h.decideSegmentListRangeForTimeline(d,b,c,e,f),p?(s=p.start,t=p.end):r=d.calcMediaTimeFromPresentationTime(c||0,a),j=0,k=g.length;k>j;j++){if(i=g[j],m=0,i.hasOwnProperty("r")&&(m=i.r),i.hasOwnProperty("t")&&(z=i.t,A=z/u),0>m){if(o=g[j+1],o&&o.hasOwnProperty("t"))n=o.t/u;else{var F=a.segmentAvailabilityRange?a.segmentAvailabilityRange.end:d.calcSegmentAvailabilityRange(a,b).end;n=d.calcMediaTimeFromPresentationTime(F,a),a.segmentDuration=i.d/u}m=Math.ceil((n-A)/(i.d/u))-1}if(q){if(x)break;B+=m+1}else for(l=0;m>=l;l++){if(B++,p){if(B>t){if(q=!0,x)break;continue}B>=s&&C.push(E(i))}else{if(C.length>y){if(q=!0,x)break;continue}D?C.push(E(i)):A>=r-i.d/u*1.5&&(D=!0,C.push(E(i)))}z+=i.d,A=z/u}}return x||(a.availableSegmentsNumber=B+1),C}var d=a.timelineConverter,e=void 0;return e={getSegments:c}}Object.defineProperty(c,"__esModule",{value:!0});var f=a("../../core/FactoryMaker.js"),g=d(f),h=a("./SegmentsUtils.js");e.__dashjs_factory_name="TimelineSegmentsGetter";var i=g["default"].getClassFactory(e);c["default"]=i,b.exports=c["default"]},{"../../core/FactoryMaker.js":11,"./SegmentsUtils.js":17}],20:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");
}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.availabilityIdx=NaN,this.wallStartTime=NaN,this.representation=null};c["default"]=e,b.exports=c["default"]},{}],21:[function(a,b,c){(function(c){"use strict";function d(a,b){var c,e=b.options_;if(this.tech_=b,this.el_=b.el(),this.elParent_=this.el_.parentNode,a.src){if(b.isReady_=!1,c=a.src,this.keySystemOptions_=d.buildDashJSProtData(a.keySystemOptions),d.hideErrors(this.elParent_),d.context_=d.context_||{},this.mediaPlayer_=g.MediaPlayer(d.context_).create(),e&&e.streamroot&&e.streamroot.p2pConfig){var i=30;this.dashjsWrapper=new h(this.mediaPlayer_,this._el,e.streamroot.p2pConfig,i)}d.useVideoJSDebug&&d.useVideoJSDebug(this.mediaPlayer_),this.mediaPlayer_.initialize(),this.mediaPlayer_.attachView(this.el_),e.autoplay||this.mediaPlayer_.setAutoPlay(!1),this.mediaPlayer_.retrieveManifest(c,f.bind(this,this.initializeDashJS))}}var e=a("global/window"),f="undefined"!=typeof window?window.videojs:"undefined"!=typeof c?c.videojs:null,g="undefined"!=typeof window?window.dashjs:"undefined"!=typeof c?c.dashjs:null,h=a("../../node_modules/streamroot-dash/lib/DashjsWrapper.js"),i=function(a){return"[object Array]"===Object.prototype.toString.call(a)},j=function(a){return"[object Object]"===Object.prototype.toString.call(a)},k=function l(a,b){var c,d,e,f;f={};for(c in b)b.hasOwnProperty(c)&&(d=a[c],e=b[c],j(d)&&j(e)?a[c]=l(d,e):a[c]=b[c]);return a};d.prototype.initializeDashJS=function(a,b){var c={};return b?(d.showErrors(this.elParent_),this.tech_.triggerReady(),void this.dispose()):(d.getWidevineProtectionData&&(c=d.getWidevineProtectionData(a),this.keySystemOptions_=k(this.keySystemOptions_,c)),void this.resetSrc_(f.bind(this,function(){d.showErrors(this.elParent_),this.mediaPlayer_.setProtectionData(this.keySystemOptions_),this.mediaPlayer_.attachSource(a),this.tech_.triggerReady()})))},d.hideErrors=function(a){a.className+=" vjs-dashjs-hide-errors"},d.showErrors=function(a){setTimeout(function(){a.className=a.className.replace(" vjs-dashjs-hide-errors","")},250)},d.buildDashJSProtData=function(a){var b,c,d,e={};if(!a||!i(a))return e;for(d=0;d<a.length;d++)b=a[d],c=k({},b.options),c.licenseUrl&&(c.serverURL=c.licenseUrl,delete c.licenseUrl),e[b.name]=c;return e},d.prototype.resetSrc_=function(a){this.el_&&(this.el_.src="",this.el_.setMediaKeys?this.el_.setMediaKeys(null).then(a,a):a())},d.prototype.dispose=function(){this.mediaPlayer_&&this.mediaPlayer_.reset(),this.resetSrc_(function(){})},f.DashSourceHandler=function(){return{canHandleSource:function(a){var b=/\.mpd/i;return f.DashSourceHandler.canPlayType(a.type)?"probably":b.test(a.src)?"maybe":""},handleSource:function(a,b){return new d(a,b)},canPlayType:function(a){return f.DashSourceHandler.canPlayType(a)}}},f.DashSourceHandler.canPlayType=function(a){var b=/^application\/dash\+xml/i;return b.test(a)?"probably":""},e.MediaSource&&f.getComponent("Html5").registerSourceHandler(f.DashSourceHandler(),0),f.Html5DashJS=d,b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../node_modules/streamroot-dash/lib/DashjsWrapper.js":2,"global/window":1}]},{},[21]);